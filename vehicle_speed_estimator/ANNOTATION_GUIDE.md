# 标注工具使用指南

## 快速开始

运行标注工具来选择视频上的 IMAGE_POINTS：

```bash
python annotate.py
```

或者：

```bash
python utils/annotate_points.py
```

## 功能说明

### 基本操作

1. **选择点**：用鼠标左键点击视频画面，按顺序选择4个点
   - 点1：左上角
   - 点2：右上角
   - 点3：右下角
   - 点4：左下角

2. **保存点**：选择完4个点后，按 `s` 键保存

3. **重新选择**：按 `r` 键清除已选择的点，重新开始

4. **切换帧**：
   - 按 `n` 键：下一帧
   - 按 `p` 键：上一帧
   - 按 `f` 键：跳转到指定帧号

5. **退出**：按 `q` 或 `ESC` 键退出

### 实时显示

- 鼠标移动时会实时显示当前坐标
- 已选择的点会用绿色圆圈标记，并显示编号
- 选择完4个点后会自动绘制多边形区域
- 区域会用半透明绿色填充

### 输出结果

保存后会在以下位置输出结果：

1. **控制台输出**：直接显示 IMAGE_POINTS 的 Python 代码
2. **文件保存**：保存到 `annotated_points.txt` 文件

### 使用示例

1. 运行脚本：
   ```bash
   python annotate.py
   ```

2. 在视频画面上按顺序点击4个点

3. 按 `s` 保存

4. 复制输出的代码到 `utils/constants.py`：
   ```python
   IMAGE_POINTS = [(x1, y1), (x2, y2), (x3, y3), (x4, y4)]
   ```

5. 根据实际测量设置对应的 `WORLD_POINTS`

## 注意事项

- 确保选择的4个点形成一个矩形或梯形区域
- 建议选择道路平坦、清晰可见的区域
- 点的顺序很重要，必须与 WORLD_POINTS 一一对应
- 如果视频较长，可以使用 `f` 键跳转到合适的帧进行标注
